
@using System
@using System.Collections.Generic
@using Elite
@using System.Linq
@{
    Layout = "layout.cshtml";
}

<div class="main">

    <div class="cardcaption">&nbsp;</div>
    
    
    @if (Model.NearbyPowerStationList != null)
    {

        <div class="imgcenter"><img src="powers\@(((List<StationData>) Model.NearbyPowerStationList[(Station.PowerTypes) Model.CurrentCard]).FirstOrDefault().Powers).png"/></div>

        <table>
            <tbody>
            @foreach (var m in Model.NearbyPowerStationList[(Station.PowerTypes) Model.CurrentCard])
            {
                if (!string.IsNullOrEmpty(m.SystemName))
                {
                    <tr>
                        <td class="caption">In System</td>
                        <td class="data">@m.SystemName</td>
                    </tr>
                }
                if (m.Distance > 0)
                {
                    <tr>
                        <td class="caption">Distance</td>
                        <td class="data">@m.Distance.ToString("N0") Ly</td>
                    </tr>
                }
                if (!string.IsNullOrEmpty(m.SystemState) && m.SystemState != "None")
                {
                    <tr>
                        <td class="caption">State</td>
                        <td class="data">@m.SystemState</td>
                    </tr>
                }
                if (m.Body != null && !string.IsNullOrEmpty(m.Body.name))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Body</td>
                        <td class="data">@m.Body.name</td>
                    </tr>
                }

                if (!string.IsNullOrEmpty(m.Name))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Station</td>
                        <td class="data">@m.Name</td>
                    </tr>
                }
                if (m.DistanceToArrival > 0)
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Dist. from star</td>
                        <td class="data">@m.DistanceToArrival.ToString("N0") Ls</td>
                    </tr>
                }

                if (!string.IsNullOrEmpty(m.Type))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Type</td>
                        <td class="data">@m.Type</td>
                    </tr>
                }

                if (!string.IsNullOrEmpty(m.SystemSecurity))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Security</td>
                        <td class="data">@m.SystemSecurity</td>
                    </tr>
                }
                if (m.SystemPopulation > 0)
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Population</td>
                        <td class="data">@m.SystemPopulation.ToString("N0")</td>
                    </tr>
                }
                if (!string.IsNullOrEmpty(m.Government))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Government</td>
                        <td class="data">@m.Government</td>
                    </tr>
                }
                if (!string.IsNullOrEmpty(m.Allegiance))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Allegiance</td>
                        <td class="data">@m.Allegiance</td>
                    </tr>
                }
                if (!string.IsNullOrEmpty(m.Faction))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Faction</td>
                        <td class="data">@m.Faction</td>
                    </tr>
                }
                if (!string.IsNullOrEmpty(m.Economies))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Economy</td>
                        <td class="data">@m.Economies</td>
                    </tr>
                }
                if (!string.IsNullOrEmpty(m.PowerplayState))
                {
                    <tr>
                        <td class="caption">&nbsp;&nbsp;&nbsp;Pwr. State</td>
                        <td class="data">@m.PowerplayState</td>
                    </tr>
                }

                if (!((List<StationData>) Model.NearbyPowerStationList[(Station.PowerTypes) Model.CurrentCard]).Last().Equals((StationData) m))
                {
                    <tr>
                        <td class="divider" colspan="2">&nbsp;</td>
                    </tr>
                }
            }
            </tbody>
        </table>

    }

</div>